    <style>
        th {
            cursor: pointer;
            position: relative;
            padding-right: 20px;
        }
        th .sort-icon {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
        }
    </style>

<div class="card-header d-flex flex-wrap align-items-center justify-content-between gap-3">
        <div class="d-flex flex-wrap align-items-center gap-3">

          <div class="dropdown">
            <button class="btn btn-primary-600 not-active px-16 py-9 dropdown-toggle toggle-icon" type="button" data-bs-toggle="dropdown" aria-expanded="false">Dodaj</button>
            <ul class="dropdown-menu" style="">
              <li><a class="dropdown-item px-16 py-8 rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900" href="{% url 'dodaj_fakture' %}">Fakturę</a></li>
              <li><a class="dropdown-item px-16 py-8 rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900" href="">Proformę</a></li>
              <li><a class="dropdown-item px-16 py-8 rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900" href="{% url 'dodaj_fakture_koszt' %}">Koszt</a></li>
              <li><a class="dropdown-item px-16 py-8 rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900" href="">Korektę</a></li>
              <li><a class="dropdown-item px-16 py-8 rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900" href="">Paragon</a></li>
            </ul>
        </div>

	<!-- <a href="{% url 'dodaj_fakture' %}"><button type="button" class="btn btn-primary-600 radius-8 px-16 py-9 d-flex align-items-center gap-2">
                        <iconify-icon icon="hugeicons:add-circle" class="text-xl"></iconify-icon> Dodaj fakturę             
	</button></a>
	<a href="{% url 'dodaj_fakture_koszt' %}"><button type="button" class="btn btn-primary-600 radius-8 px-16 py-9 d-flex align-items-center gap-2">
                        <iconify-icon icon="hugeicons:add-circle-half-dot" class="text-xl"></iconify-icon> Dodaj koszt             
	</button></a> -->
	<a href="{% url 'dodaj_fakture_koszt' %}"><button type="button" class="btn btn-primary-600 radius-8 px-16 py-9 d-flex align-items-center gap-2">
                        <iconify-icon icon="hugeicons:pdf-01" class="text-xl"></iconify-icon> Wygeneruj PDF z zaznaczonych             
	</button></a>

        </div>
      </div>
      <div class="card-body">

    <table class="table bordered-table mb-0 compact stripe">
        <thead>
            <tr>
              	<th scope="col" onclick="sortTable(0)">Typ</th>
              	<th scope="col" onclick="sortTable(0)">Numer</th>
              	<th scope="col" onclick="sortTable(0)">Sprzedaż</th>
              	<th scope="col" onclick="sortTable(0)">Wystawiono</th>
              	<th scope="col" onclick="sortTable(0)">Termin</th>
		<th scope="col" onclick="sortTable(0)">Kontrahent</th>
		<th scope="col" onclick="sortTable(0)">Netto</th>
		<th scope="col" onclick="sortTable(0)">Brutto</th>
		<th scope="col" onclick="sortTable(0)">Produkt</th>
		<th scope="col" onclick="sortTable(0)">Status</th>
              	<th scope="col">Akcje</th>
            </tr>
        </thead>
        <tbody>
{% for faktura in faktury %}
            <tr>
		<td>{{ faktura.get_typ_dokumentu_display }}</td>
              <td><a href="{% url 'szczegoly_faktury' pk=faktura.pk %}" class="text-primary-600">{{ faktura.numer }}</a></td>
              <td>{{ faktura.data_sprzedazy|date:"Y-m-d" }}</td>
              <td>{{ faktura.data_wystawienia|date:"Y-m-d" }}</td>
<td>{{ faktura.termin_platnosci|date:"Y-m-d" }}</td>
<td>{{ faktura.nabywca.nazwa }}</td>
<td>{{ faktura.suma_netto }}</td>
<td>{{ faktura.suma_brutto }}</td>
              <td>{% for pozycja in faktura.pozycjafaktury_set.all %}
                            {{ pozycja.nazwa }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
</td>
              <td> 
{% if faktura.status == 'wystawiona' %}
  <span class="bg-danger-focus text-danger-main px-24 py-4 rounded-pill fw-medium text-sm">
    {{ faktura.get_status_display }}
  </span>
{% elif faktura.status == 'oplacona' %}
  <span class="bg-success-focus text-success-main px-24 py-4 rounded-pill fw-medium text-sm">
    {{ faktura.get_status_display }}
  </span>
{% elif faktura.status == 'cz_oplacona' %}
  <span class="bg-warning-focus text-warning-main px-24 py-4 rounded-pill fw-medium text-sm">
    {{ faktura.get_status_display }}
  </span>
{% else %}
  <span class="bg-secondary-focus text-secondary-main px-24 py-4 rounded-pill fw-medium text-sm">
    {{ faktura.get_status_display }}
  </span>
{% endif %}
 </td>
              <td>
                <a href="{% url 'generuj_pdf' pk=faktura.pk%}" class="w-32-px h-32-px bg-primary-light text-primary-600 rounded-circle d-inline-flex align-items-center justify-content-center">
                  <iconify-icon icon="iconamoon:eye-light"></iconify-icon>
                </a>
                <a href="{% url 'update_payment' pk=faktura.pk %}" class="w-32-px h-32-px bg-success-focus text-success-main rounded-circle d-inline-flex align-items-center justify-content-center">
                  <iconify-icon icon="lucide:edit"></iconify-icon>
                </a>
                <a href="{% url 'usun_fakture' pk=faktura.pk %}" class="w-32-px h-32-px bg-danger-focus text-danger-main rounded-circle d-inline-flex align-items-center justify-content-center">
                  <iconify-icon icon="mingcute:delete-2-line"></iconify-icon>
                </a>
              </td>
            </tr>
            {% empty %}
                <tr><td colspan="12">Brak faktur.</td></tr>
            {% endfor %}
        </tbody>
    </table>

<script>
        let sortDirection = {}; // Przechowuje stan sortowania dla każdej kolumny

        function sortTable(columnIndex) {
            let table = document.querySelector("table tbody");
            let rows = Array.from(table.rows);

            let isAscending = sortDirection[columnIndex] !== "asc";
            sortDirection[columnIndex] = isAscending ? "asc" : "desc";

            rows.sort((rowA, rowB) => {
                let cellA = rowA.cells[columnIndex].innerText.trim();
                let cellB = rowB.cells[columnIndex].innerText.trim();

                let numA = parseFloat(cellA);
                let numB = parseFloat(cellB);

                if (!isNaN(numA) && !isNaN(numB)) {
                    return isAscending ? numA - numB : numB - numA;
                } else {
                    return isAscending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
                }
            });

            table.append(...rows);

            updateSortIcons(columnIndex, isAscending);
        }

        function updateSortIcons(columnIndex, isAscending) {
            document.querySelectorAll(".sort-icon").forEach(icon => icon.innerHTML = ""); // Reset ikon

            let th = document.querySelectorAll("th")[columnIndex];
            let icon = th.querySelector(".sort-icon");

            icon.innerHTML = isAscending ? " ▲" : " ▼"; // Dodanie strzałki
        }
    </script>