<div class="col-xxl-3 col-sm-6">
                        <div class="card p-3 shadow-none radius-8 border h-100 bg-gradient-start-3">
                            <div class="card-body p-0">
                            <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-8">
                                
                                <div class="d-flex align-items-center gap-2">
                                    <span class="mb-0 w-48-px h-48-px bg-yellow text-white flex-shrink-0 d-flex justify-content-center align-items-center rounded-circle h6">
                                    <iconify-icon icon="iconamoon:discount-fill" class="icon"></iconify-icon>  
                                    </span>
                                    <div>
                                    <span class="mb-2 fw-medium text-secondary-light text-sm">Koszty roczne</span>
                                    <h6 class="fw-semibold">{{ koszty.Roczny }} PLN</h6>
                                    </div>
                                </div>
                                
                                <div id="year-cost-chart" class="remove-tooltip-title rounded-tooltip-value"></div>
                            </div>
<p class="text-sm mb-0">PorÃ³wnanie: 
    {% if comparisons.koszty.Roczny is not None %}
      {% if comparisons.koszty.Roczny > 0 %}
        <span class="bg-success-focus px-1 rounded-2 fw-medium text-success-main text-sm">
          +{{ comparisons.koszty.Roczny|floatformat:2 }}%
        </span>
      {% elif comparisons.koszty.Roczny < 0 %}
        <span class="bg-danger-focus px-1 rounded-2 fw-medium text-danger-main text-sm">
          -{{ comparisons.koszty.Roczny|floatformat:2 }}%
        </span>
      {% else %}
        <span class="bg-warning-focus px-1 rounded-2 fw-medium text-warning-main text-sm">0%</span>
      {% endif %}
    {% else %}
      <span class="bg-warning-focus px-1 rounded-2 fw-medium text-warning-main text-sm">b/d</span>
    {% endif %} 
 poprzedniego okresu</p>

                            </div>
                        </div>
                        </div>

<script>

    // ================================== Crm Home widgets charts Start =================================
    function createWidgetChartYearCost(chartId, chartColor) {

        let currentYear = new Date().getFullYear();

        var options = {
        series: [
            {
                name: 'seriesYear',
                data: {{ costs_yearly_series|safe }},
            },
        ],
        chart: {
            type: 'area',
            width: '100%',
            height: 42,
            sparkline: {
                enabled: true // Remove whitespace
            },

            toolbar: {
                show: false
            },
            padding: {
                left: 0,
                right: 0,
                top: 0,
                bottom: 0
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            curve: 'smooth',
            width: 2,
            colors: [chartColor],
            lineCap: 'round'
        },
        grid: {
            show: true,
            borderColor: 'transparent',
            strokeDashArray: 0,
            position: 'back',
            xaxis: {
                lines: {
                    show: false
                }
            },   
            yaxis: {
                lines: {
                    show: false
                }
            },  
            row: {
                colors: undefined,
                opacity: 0.5
            },  
            column: {
                colors: undefined,
                opacity: 0.5
            },  
            padding: {
                top: -3,
                right: 0,
                bottom: 0,
                left: 0
            },  
        },
        fill: {
            type: 'gradient',
            colors: [chartColor], // Set the starting color (top color) here
            gradient: {
                shade: 'light', // Gradient shading type
                type: 'vertical',  // Gradient direction (vertical)
                shadeIntensity: 0.5, // Intensity of the gradient shading
                gradientToColors: [`${chartColor}00`], // Bottom gradient color (with transparency)
                inverseColors: false, // Do not invert colors
                opacityFrom: .75, // Starting opacity
                opacityTo: 0.3,  // Ending opacity
                stops: [0, 100],
            },
        },
        // Customize the circle marker color on hover
        markers: {
            colors: [chartColor],
            strokeWidth: 2,
            size: 0,
            hover: {
            size: 8
            }
        },
        xaxis: {
            labels: {
                show: false
            },
            categories: [`Jan ${currentYear}`, `Feb ${currentYear}`, `Mar ${currentYear}`, `Apr ${currentYear}`, `May ${currentYear}`, `Jun ${currentYear}`, `Jul ${currentYear}`, `Aug ${currentYear}`, `Sep ${currentYear}`, `Oct ${currentYear}`, `Nov ${currentYear}`, `Dec ${currentYear}`],
            tooltip: {
                enabled: false,
            },
        },
        yaxis: {
            labels: {
                show: false
            }
        },
        tooltip: {
            x: {
                format: 'dd/MM/yy HH:mm'
            },
        },
    };

    var chart = new ApexCharts(document.querySelector(`#${chartId}`), options);
        chart.render();
    }

    // Call the function for each chart with the desired ID and color
    createWidgetChartYearCost('year-cost-chart', '#f4941e');
    // ================================== Crm Home widgets charts End =================================
</script>